import{S as ke,i as Ve,s as Ee,n as $,d as u,y as He,z as pe,e as J,f as G,h as a,v as le,w as o,A as we,m as L,j as d,k as V,x as F,l as R,q as S,o as p,p as j,B as Ce,C as oe}from"../chunks/Dus5G4-p.js";import"../chunks/IHki7fMi.js";function ve(s){return(s==null?void 0:s.length)!==void 0?s:Array.from(s)}function he(s,e,t){const l=s.slice();return l[12]=e[t],l}function Ie(s){let e,t='<p class="svelte-ap6fve">No products available. Use the search bar above to find products.</p>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-xwuwh9"&&(e.innerHTML=t),this.h()},h(){o(e,"class","no-products svelte-ap6fve")},m(l,r){G(l,e,r)},p:$,d(l){l&&u(e)}}}function Me(s){let e,t,l,r="All Available Products",i,n;function f(c,g){if(c[4])return ye;if(c[1])return De}let I=f(s),v=I&&I(s),_=ve(s[0]),m=[];for(let c=0;c<_.length;c+=1)m[c]=ge(he(s,_,c));return{c(){v&&v.c(),e=S(),t=p("div"),l=p("h2"),l.textContent=r,i=S(),n=p("div");for(let c=0;c<m.length;c+=1)m[c].c();this.h()},l(c){v&&v.l(c),e=L(c),t=d(c,"DIV",{class:!0});var g=V(t);l=d(g,"H2",{class:!0,"data-svelte-h":!0}),F(l)!=="svelte-ir5yr6"&&(l.textContent=r),i=L(g),n=d(g,"DIV",{class:!0});var h=V(n);for(let k=0;k<m.length;k+=1)m[k].l(h);h.forEach(u),g.forEach(u),this.h()},h(){o(l,"class","svelte-ap6fve"),o(n,"class","products svelte-ap6fve"),o(t,"class","products-section svelte-ap6fve")},m(c,g){v&&v.m(c,g),G(c,e,g),G(c,t,g),a(t,l),a(t,i),a(t,n);for(let h=0;h<m.length;h+=1)m[h]&&m[h].m(n,null)},p(c,g){if(I===(I=f(c))&&v?v.p(c,g):(v&&v.d(1),v=I&&I(c),v&&(v.c(),v.m(e.parentNode,e))),g&1){_=ve(c[0]);let h;for(h=0;h<_.length;h+=1){const k=he(c,_,h);m[h]?m[h].p(k,g):(m[h]=ge(k),m[h].c(),m[h].m(n,null))}for(;h<m.length;h+=1)m[h].d(1);m.length=_.length}},d(c){c&&(u(e),u(t)),v&&v.d(c),Ce(m,c)}}}function Pe(s){let e,t,l,r;return{c(){e=p("div"),t=p("p"),l=j("Error: "),r=j(s[5]),this.h()},l(i){e=d(i,"DIV",{class:!0});var n=V(e);t=d(n,"P",{class:!0});var f=V(t);l=R(f,"Error: "),r=R(f,s[5]),f.forEach(u),n.forEach(u),this.h()},h(){o(t,"class","svelte-ap6fve"),o(e,"class","error svelte-ap6fve")},m(i,n){G(i,e,n),a(e,t),a(t,l),a(t,r)},p(i,n){n&32&&J(r,i[5])},d(i){i&&u(e)}}}function Te(s){let e,t='<div class="loading-spinner svelte-ap6fve"></div> <p class="svelte-ap6fve">Loading products...</p>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-jafke4"&&(e.innerHTML=t),this.h()},h(){o(e,"class","loading svelte-ap6fve")},m(l,r){G(l,e,r)},p:$,d(l){l&&u(e)}}}function De(s){let e,t,l="ðŸ¤– AI Top Recommendation",r,i,n,f,I="Why this product?",v,_,m,c,g,h,k,E,y,N=s[1].product_title+"",M,P,w,b=(s[1].product_description.length>150?s[1].product_description.substring(0,150)+"...":s[1].product_description)+"",B,K,O,z,A=s[1].store_name+"",C,H,T,x,W=s[1].price+"",Q,ee;function te(D,q){return D[1].product_photos&&D[1].product_photos.length>0?Le:Ae}let X=te(s),U=X(s),Z=s[1].offer_url&&_e(s);return{c(){e=p("div"),t=p("h2"),t.textContent=l,r=S(),i=p("div"),n=p("p"),f=p("strong"),f.textContent=I,v=S(),_=j(s[2]),m=S(),c=p("div"),g=p("div"),U.c(),h=S(),k=p("div"),E=p("div"),y=p("h3"),M=j(N),P=S(),w=p("p"),B=j(b),K=S(),O=p("p"),z=j("Store: "),C=j(A),H=S(),T=p("p"),x=j("Price: $"),Q=j(W),ee=S(),Z&&Z.c(),this.h()},l(D){e=d(D,"DIV",{class:!0});var q=V(e);t=d(q,"H2",{class:!0,"data-svelte-h":!0}),F(t)!=="svelte-1k8s9gu"&&(t.textContent=l),r=L(q),i=d(q,"DIV",{class:!0});var ce=V(i);n=d(ce,"P",{class:!0});var se=V(n);f=d(se,"STRONG",{class:!0,"data-svelte-h":!0}),F(f)!=="svelte-aspac"&&(f.textContent=I),v=L(se),_=R(se,s[2]),se.forEach(u),ce.forEach(u),m=L(q),c=d(q,"DIV",{class:!0});var re=V(c);g=d(re,"DIV",{class:!0});var ue=V(g);U.l(ue),ue.forEach(u),h=L(re),k=d(re,"DIV",{class:!0});var ae=V(k);E=d(ae,"DIV",{class:!0});var Y=V(E);y=d(Y,"H3",{class:!0});var fe=V(y);M=R(fe,N),fe.forEach(u),P=L(Y),w=d(Y,"P",{class:!0});var de=V(w);B=R(de,b),de.forEach(u),K=L(Y),O=d(Y,"P",{class:!0});var ie=V(O);z=R(ie,"Store: "),C=R(ie,A),ie.forEach(u),H=L(Y),T=d(Y,"P",{class:!0});var ne=V(T);x=R(ne,"Price: $"),Q=R(ne,W),ne.forEach(u),Y.forEach(u),ee=L(ae),Z&&Z.l(ae),ae.forEach(u),re.forEach(u),q.forEach(u),this.h()},h(){o(t,"class","svelte-ap6fve"),o(f,"class","svelte-ap6fve"),o(n,"class","svelte-ap6fve"),o(i,"class","ai-rationale svelte-ap6fve"),o(g,"class","product-image-large svelte-ap6fve"),o(y,"class","product-title-large svelte-ap6fve"),o(w,"class","description-large svelte-ap6fve"),o(O,"class","store-large svelte-ap6fve"),o(T,"class","price-large svelte-ap6fve"),o(E,"class","product-info-large svelte-ap6fve"),o(k,"class","product-content-large svelte-ap6fve"),o(c,"class","ai-recommended-product svelte-ap6fve"),o(e,"class","ai-recommendations svelte-ap6fve")},m(D,q){G(D,e,q),a(e,t),a(e,r),a(e,i),a(i,n),a(n,f),a(n,v),a(n,_),a(e,m),a(e,c),a(c,g),U.m(g,null),a(c,h),a(c,k),a(k,E),a(E,y),a(y,M),a(E,P),a(E,w),a(w,B),a(E,K),a(E,O),a(O,z),a(O,C),a(E,H),a(E,T),a(T,x),a(T,Q),a(k,ee),Z&&Z.m(k,null)},p(D,q){q&4&&J(_,D[2]),X===(X=te(D))&&U?U.p(D,q):(U.d(1),U=X(D),U&&(U.c(),U.m(g,null))),q&2&&N!==(N=D[1].product_title+"")&&J(M,N),q&2&&b!==(b=(D[1].product_description.length>150?D[1].product_description.substring(0,150)+"...":D[1].product_description)+"")&&J(B,b),q&2&&A!==(A=D[1].store_name+"")&&J(C,A),q&2&&W!==(W=D[1].price+"")&&J(Q,W),D[1].offer_url?Z?Z.p(D,q):(Z=_e(D),Z.c(),Z.m(k,null)):Z&&(Z.d(1),Z=null)},d(D){D&&u(e),U.d(),Z&&Z.d()}}}function ye(s){let e,t='<div class="loading-spinner svelte-ap6fve"></div> <p class="svelte-ap6fve">ðŸ¤– Getting AI recommendations...</p>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-mhz8nq"&&(e.innerHTML=t),this.h()},h(){o(e,"class","ai-loading svelte-ap6fve")},m(l,r){G(l,e,r)},p:$,d(l){l&&u(e)}}}function Ae(s){let e,t='<svg width="60" height="60" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-ap6fve"><path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13.5C15 12.7 14.3 12 13.5 12C14.3 12 15 11.3 15 10.5V9C15 7.9 14.1 7 13 7H9V9H13V11H11V13H13V15H9V17H13C14.1 17 15 16.1 15 15Z" fill="rgba(255,255,255,0.3)" class="svelte-ap6fve"></path></svg>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-hu2w6e"&&(e.innerHTML=t),this.h()},h(){o(e,"class","no-image-placeholder-large svelte-ap6fve")},m(l,r){G(l,e,r)},p:$,d(l){l&&u(e)}}}function Le(s){let e,t,l,r,i;return{c(){e=p("img"),this.h()},l(n){e=d(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){oe(e.src,t=s[1].product_photos[0])||o(e,"src",t),o(e,"alt",l=s[1].product_title),o(e,"class","svelte-ap6fve")},m(n,f){G(n,e,f),r||(i=le(e,"error",be),r=!0)},p(n,f){f&2&&!oe(e.src,t=n[1].product_photos[0])&&o(e,"src",t),f&2&&l!==(l=n[1].product_title)&&o(e,"alt",l)},d(n){n&&u(e),r=!1,i()}}}function _e(s){let e,t,l;return{c(){e=p("a"),t=j("Buy Now"),this.h()},l(r){e=d(r,"A",{href:!0,target:!0,rel:!0,class:!0});var i=V(e);t=R(i,"Buy Now"),i.forEach(u),this.h()},h(){o(e,"href",l=s[1].offer_url),o(e,"target","_blank"),o(e,"rel","noopener noreferrer"),o(e,"class","buy-button-large svelte-ap6fve")},m(r,i){G(r,e,i),a(e,t)},p(r,i){i&2&&l!==(l=r[1].offer_url)&&o(e,"href",l)},d(r){r&&u(e)}}}function Se(s){let e,t='<svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-ap6fve"><path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM19 19H5V5H19V19ZM15 15V13.5C15 12.7 14.3 12 13.5 12C14.3 12 15 11.3 15 10.5V9C15 7.9 14.1 7 13 7H9V9H13V11H11V13H13V15H9V17H13C14.1 17 15 16.1 15 15Z" fill="rgba(255,255,255,0.3)" class="svelte-ap6fve"></path></svg>';return{c(){e=p("div"),e.innerHTML=t,this.h()},l(l){e=d(l,"DIV",{class:!0,"data-svelte-h":!0}),F(e)!=="svelte-ak5plc"&&(e.innerHTML=t),this.h()},h(){o(e,"class","no-image-placeholder svelte-ap6fve")},m(l,r){G(l,e,r)},p:$,d(l){l&&u(e)}}}function Ne(s){let e,t,l,r,i;return{c(){e=p("img"),this.h()},l(n){e=d(n,"IMG",{src:!0,alt:!0,class:!0}),this.h()},h(){oe(e.src,t=s[12].product_photos[0])||o(e,"src",t),o(e,"alt",l=s[12].product_title),o(e,"class","svelte-ap6fve")},m(n,f){G(n,e,f),r||(i=le(e,"error",be),r=!0)},p(n,f){f&1&&!oe(e.src,t=n[12].product_photos[0])&&o(e,"src",t),f&1&&l!==(l=n[12].product_title)&&o(e,"alt",l)},d(n){n&&u(e),r=!1,i()}}}function me(s){let e,t,l;return{c(){e=p("a"),t=j("Buy Now"),this.h()},l(r){e=d(r,"A",{href:!0,target:!0,rel:!0,class:!0});var i=V(e);t=R(i,"Buy Now"),i.forEach(u),this.h()},h(){o(e,"href",l=s[12].offer_url),o(e,"target","_blank"),o(e,"rel","noopener noreferrer"),o(e,"class","buy-button svelte-ap6fve")},m(r,i){G(r,e,i),a(e,t)},p(r,i){i&1&&l!==(l=r[12].offer_url)&&o(e,"href",l)},d(r){r&&u(e)}}}function ge(s){let e,t,l,r,i,n,f=s[12].product_title+"",I,v,_,m=(s[12].product_description.length>100?s[12].product_description.substring(0,100)+"...":s[12].product_description)+"",c,g,h,k,E=s[12].store_name+"",y,N,M,P,w=s[12].price+"",b,B,K;function O(H,T){return H[12].product_photos&&H[12].product_photos.length>0?Ne:Se}let z=O(s),A=z(s),C=s[12].offer_url&&me(s);return{c(){e=p("div"),t=p("div"),A.c(),l=S(),r=p("div"),i=p("div"),n=p("h3"),I=j(f),v=S(),_=p("p"),c=j(m),g=S(),h=p("p"),k=j("Store: "),y=j(E),N=S(),M=p("p"),P=j("Price: $"),b=j(w),B=S(),C&&C.c(),K=S(),this.h()},l(H){e=d(H,"DIV",{class:!0});var T=V(e);t=d(T,"DIV",{class:!0});var x=V(t);A.l(x),x.forEach(u),l=L(T),r=d(T,"DIV",{class:!0});var W=V(r);i=d(W,"DIV",{class:!0});var Q=V(i);n=d(Q,"H3",{class:!0});var ee=V(n);I=R(ee,f),ee.forEach(u),v=L(Q),_=d(Q,"P",{class:!0});var te=V(_);c=R(te,m),te.forEach(u),g=L(Q),h=d(Q,"P",{class:!0});var X=V(h);k=R(X,"Store: "),y=R(X,E),X.forEach(u),N=L(Q),M=d(Q,"P",{class:!0});var U=V(M);P=R(U,"Price: $"),b=R(U,w),U.forEach(u),Q.forEach(u),B=L(W),C&&C.l(W),W.forEach(u),K=L(T),T.forEach(u),this.h()},h(){o(t,"class","product-image svelte-ap6fve"),o(n,"class","product-title svelte-ap6fve"),o(_,"class","description svelte-ap6fve"),o(h,"class","store svelte-ap6fve"),o(M,"class","price svelte-ap6fve"),o(i,"class","product-info svelte-ap6fve"),o(r,"class","product-content svelte-ap6fve"),o(e,"class","product-card svelte-ap6fve")},m(H,T){G(H,e,T),a(e,t),A.m(t,null),a(e,l),a(e,r),a(r,i),a(i,n),a(n,I),a(i,v),a(i,_),a(_,c),a(i,g),a(i,h),a(h,k),a(h,y),a(i,N),a(i,M),a(M,P),a(M,b),a(r,B),C&&C.m(r,null),a(e,K)},p(H,T){z===(z=O(H))&&A?A.p(H,T):(A.d(1),A=z(H),A&&(A.c(),A.m(t,null))),T&1&&f!==(f=H[12].product_title+"")&&J(I,f),T&1&&m!==(m=(H[12].product_description.length>100?H[12].product_description.substring(0,100)+"...":H[12].product_description)+"")&&J(c,m),T&1&&E!==(E=H[12].store_name+"")&&J(y,E),T&1&&w!==(w=H[12].price+"")&&J(b,w),H[12].offer_url?C?C.p(H,T):(C=me(H),C.c(),C.m(r,null)):C&&(C.d(1),C=null)},d(H){H&&u(e),A.d(),C&&C.d()}}}function Be(s){let e,t,l,r,i=`<a href="/" class="back-link svelte-ap6fve"><svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" class="svelte-ap6fve"><path d="M15 10H5M5 10L10 5M5 10L10 15" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="svelte-ap6fve"></path></svg>
				Back to Home</a> <h1 class="svelte-ap6fve">Market Aide</h1> <p class="subtitle svelte-ap6fve">Smart Buying Decisions</p>`,n,f,I,v,_,m,c,g=s[3]?"Searching...":"Search",h,k,E,y,N;function M(b,B){return b[3]?Te:b[5]?Pe:b[0].length>0?Me:Ie}let P=M(s),w=P(s);return{c(){e=S(),t=p("main"),l=p("div"),r=p("header"),r.innerHTML=i,n=S(),f=p("div"),I=p("div"),v=p("div"),_=p("input"),m=S(),c=p("button"),h=j(g),E=S(),w.c(),this.h()},l(b){we("svelte-dssyvq",document.head).forEach(u),e=L(b),t=d(b,"MAIN",{class:!0});var K=V(t);l=d(K,"DIV",{class:!0});var O=V(l);r=d(O,"HEADER",{class:!0,"data-svelte-h":!0}),F(r)!=="svelte-d0rwv6"&&(r.innerHTML=i),n=L(O),f=d(O,"DIV",{class:!0});var z=V(f);I=d(z,"DIV",{class:!0});var A=V(I);v=d(A,"DIV",{class:!0});var C=V(v);_=d(C,"INPUT",{type:!0,placeholder:!0,class:!0}),m=L(C),c=d(C,"BUTTON",{class:!0});var H=V(c);h=R(H,g),H.forEach(u),C.forEach(u),A.forEach(u),E=L(z),w.l(z),z.forEach(u),O.forEach(u),K.forEach(u),this.h()},h(){document.title="Buying - Market Aide",o(r,"class","header svelte-ap6fve"),o(_,"type","text"),o(_,"placeholder","Search for products (e.g., Nike shoes, binders, Muji pens)"),o(_,"class","search-input svelte-ap6fve"),_.disabled=s[3],c.disabled=k=s[3]||!s[6].trim(),o(c,"class","search-button svelte-ap6fve"),o(v,"class","search-container svelte-ap6fve"),o(I,"class","search-section svelte-ap6fve"),o(f,"class","content svelte-ap6fve"),o(l,"class","container svelte-ap6fve"),o(t,"class","svelte-ap6fve")},m(b,B){G(b,e,B),G(b,t,B),a(t,l),a(l,r),a(l,n),a(l,f),a(f,I),a(I,v),a(v,_),pe(_,s[6]),a(v,m),a(v,c),a(c,h),a(f,E),w.m(f,null),y||(N=[le(_,"input",s[9]),le(_,"keypress",s[8]),le(c,"click",s[7])],y=!0)},p(b,[B]){B&8&&(_.disabled=b[3]),B&64&&_.value!==b[6]&&pe(_,b[6]),B&8&&g!==(g=b[3]?"Searching...":"Search")&&J(h,g),B&72&&k!==(k=b[3]||!b[6].trim())&&(c.disabled=k),P===(P=M(b))&&w?w.p(b,B):(w.d(1),w=P(b),w&&(w.c(),w.m(f,null)))},i:$,o:$,d(b){b&&(u(e),u(t)),w.d(),y=!1,He(N)}}}function be(s){const e=s.target;e&&(e.style.display="none")}function Re(s,e,t){let l=[],r=null,i=null,n=!1,f=!1,I=null,v="";async function _(k=""){t(3,n=!0),t(5,I=null),t(1,r=null),t(2,i=null);try{const y=encodeURIComponent(k||"Nike shoes"),N=await fetch(`/api/rapidApi?q=${y}`);if(!N.ok)throw new Error(`HTTP error! status: ${N.status}`);const M=await N.json();t(0,l=M.filtered_products),console.log("Products received from API:",l.map((P,w)=>({index:w,title:P.product_title,price:P.price,store:P.store_name}))),t(3,n=!1),m(l)}catch(E){t(5,I=E instanceof Error?E.message:"An unknown error occurred"),t(3,n=!1)}}async function m(k){var E,y,N;t(4,f=!0);try{const M=await fetch("/api/openAI/buy",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({productList:k})});if(!M.ok)throw new Error(`HTTP error! status: ${M.status}`);const P=await M.json();console.log("AI Recommendation received:",{recommendedProduct:{title:(E=P.recommendedProduct)==null?void 0:E.product_title,price:(y=P.recommendedProduct)==null?void 0:y.price,store:(N=P.recommendedProduct)==null?void 0:N.store_name},rationale:P.rationale}),t(1,r=P.recommendedProduct),t(2,i=P.rationale)}catch(M){console.error("AI recommendation error:",M)}finally{t(4,f=!1)}}function c(){v.trim()&&_(v.trim())}function g(k){k.key==="Enter"&&c()}function h(){v=this.value,t(6,v)}return[l,r,i,n,f,I,v,c,g,h]}class Ze extends ke{constructor(e){super(),Ve(this,e,Re,Be,Ee,{})}}export{Ze as component};
